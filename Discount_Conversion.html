<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨çƒä¼˜æƒ æŠ˜æ‰£è®¡ç®—ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-group label {
            display: block;
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .form-group select {
            width: 100%;
            padding: 15px;
            font-size: 1em;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-panel {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            display: none;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .input-panel.active {
            display: block;
        }

        .input-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .input-item {
            flex: 1;
            min-width: 200px;
        }

        .input-item label {
            display: block;
            font-size: 0.95em;
            color: #555;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-item input {
            width: 100%;
            padding: 12px;
            font-size: 1em;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .input-item input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .result-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin-top: 30px;
            color: white;
            display: none;
        }

        .result-panel.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .result-label {
            font-size: 1.2em;
            opacity: 0.95;
            margin-bottom: 15px;
        }

        .result-value {
            font-size: 5em;
            font-weight: bold;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .result-detail {
            font-size: 1.1em;
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .tip-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            color: #856404;
        }

        .discount-examples {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px dashed #e0e0e0;
        }

        .discount-examples h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .example-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .example-tag {
            background: #f0f0f0;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #666;
        }

        .warning {
            color: #ff6b6b;
            font-size: 0.9em;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .main-card {
                padding: 25px;
            }

            .result-value {
                font-size: 3.5em;
            }

            .header h1 {
                font-size: 2em;
            }

            .input-item {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ å…¨çƒä¼˜æƒ æŠ˜æ‰£è®¡ç®—ç³»ç»Ÿ</h1>
            <p>æ”¯æŒå…¨çƒå„ç±»ä¿ƒé”€æ´»åŠ¨æŠ˜æ‰£åŠ›åº¦è®¡ç®—</p>
        </div>

        <div class="main-card">
            <div class="form-group">
                <label for="discountType">é€‰æ‹©ä¼˜æƒ ç±»å‹</label>
                <select id="discountType">
                    <option value="">è¯·é€‰æ‹©ä¼˜æƒ ç±»å‹...</option>
                    <option value="buyGetFree">ä¹°Mé€Nï¼ˆä¹°ä¸€é€ä¸€ã€ä¹°äºŒé€ä¸€ç­‰ï¼‰</option>
                    <option value="recharge">å……å€¼è¿”ç°/å‚¨å€¼é€ï¼ˆå……1000é€200ç­‰ï¼‰</option>
                    <option value="nthDiscount">ç¬¬Nä»¶æ‰“æŠ˜ï¼ˆç¬¬äºŒä»¶åŠä»·ã€ç¬¬ä¸‰ä»¶å…è´¹ç­‰ï¼‰</option>
                    <option value="fullReduction">æ»¡å‡ä¼˜æƒ ï¼ˆæ»¡100å‡20ç­‰ï¼‰</option>
                    <option value="fullDiscount">æ»¡é¢æ‰“æŠ˜ï¼ˆæ»¡500æ‰“8æŠ˜ç­‰ï¼‰</option>
                    <option value="fullQuantityDiscount">æ»¡ä»¶æŠ˜æ‰£ï¼ˆæ»¡3ä»¶æ‰“8æŠ˜ç­‰ï¼‰</option>
                    <option value="directDiscount">ç›´æ¥æŠ˜æ‰£ï¼ˆ8æŠ˜ã€9æŠ˜ç­‰ï¼‰</option>
                    <option value="tieredDiscount">é˜¶æ¢¯æŠ˜æ‰£ï¼ˆä¹°è¶Šå¤šæŠ˜æ‰£è¶Šå¤§ï¼‰</option>
                    <option value="bundlePrice">ç»„åˆå®šä»·ï¼ˆä»»é€‰Nä»¶Må…ƒï¼‰</option>
                    <option value="extraPurchase">åŠ ä»·è´­/æ¢è´­ï¼ˆæ»¡100åŠ 10å…ƒæ¢è´­ï¼‰</option>
                    <option value="percentOff">ç™¾åˆ†æ¯”ä¼˜æƒ ï¼ˆç«‹å‡30%ç­‰ï¼‰</option>
                    <option value="memberMultiplier">ä¼šå‘˜ç§¯åˆ†å€æ•°ï¼ˆåŒå€ç§¯åˆ†ã€ä¸‰å€ç§¯åˆ†ï¼‰</option>
                </select>
            </div>

            <!-- ä¹°Mé€N -->
            <div id="panel-buyGetFree" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>ä¹°å‡ ä»¶ï¼ˆMï¼‰</label>
                        <input type="number" id="buyQuantity" min="1" value="1" placeholder="ä¾‹å¦‚ï¼š2">
                    </div>
                    <div class="input-item">
                        <label>é€å‡ ä»¶ï¼ˆNï¼‰</label>
                        <input type="number" id="freeQuantity" min="1" value="1" placeholder="ä¾‹å¦‚ï¼š1">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šä¹°2é€1ï¼Œç›¸å½“äºä¹°3ä»¶å•†å“åªéœ€ä»˜2ä»¶çš„é’±
                </div>
            </div>

            <!-- å……å€¼è¿”ç° -->
            <div id="panel-recharge" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>å……å€¼é‡‘é¢</label>
                        <input type="number" id="rechargeAmount" min="0" value="1000" placeholder="ä¾‹å¦‚ï¼š1000">
                    </div>
                    <div class="input-item">
                        <label>èµ é€é‡‘é¢</label>
                        <input type="number" id="giftAmount" min="0" value="200" placeholder="ä¾‹å¦‚ï¼š200">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šå……1000é€200ï¼Œç›¸å½“äºå®é™…æ¶ˆè´¹1200å…ƒåªéœ€æ”¯ä»˜1000å…ƒ
                </div>
            </div>

            <!-- ç¬¬Nä»¶æ‰“æŠ˜ -->
            <div id="panel-nthDiscount" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>ç¬¬å‡ ä»¶å¼€å§‹ä¼˜æƒ </label>
                        <input type="number" id="nthItem" min="1" value="2" placeholder="ä¾‹å¦‚ï¼š2">
                    </div>
                    <div class="input-item">
                        <label>ä¼˜æƒ æŠ˜æ‰£ï¼ˆå¡«æŠ˜æ‰£æ•°ï¼Œ0è¡¨ç¤ºå…è´¹ï¼‰</label>
                        <input type="number" id="nthDiscountRate" min="0" max="10" step="0.1" value="5" placeholder="ä¾‹å¦‚ï¼š5è¡¨ç¤º5æŠ˜ï¼Œ0è¡¨ç¤ºå…è´¹">
                    </div>
                    <div class="input-item">
                        <label>è´­ä¹°æ€»ä»¶æ•°</label>
                        <input type="number" id="totalItems" min="1" value="2" placeholder="ä¾‹å¦‚ï¼š3">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šç¬¬2ä»¶åŠä»·ï¼Œä¹°3ä»¶å•†å“æ—¶ï¼Œç¬¬2ã€3ä»¶éƒ½æ˜¯åŠä»·
                </div>
            </div>

            <!-- æ»¡å‡ä¼˜æƒ  -->
            <div id="panel-fullReduction" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>æ»¡å¤šå°‘å…ƒ</label>
                        <input type="number" id="fullAmount" min="0" value="100" placeholder="ä¾‹å¦‚ï¼š100">
                    </div>
                    <div class="input-item">
                        <label>å‡å¤šå°‘å…ƒ</label>
                        <input type="number" id="reductionAmount" min="0" value="20" placeholder="ä¾‹å¦‚ï¼š20">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šæ»¡100å‡20ï¼Œç›¸å½“äºè´­ä¹°100å…ƒå•†å“åªéœ€ä»˜80å…ƒ
                </div>
            </div>

            <!-- æ»¡é¢æ‰“æŠ˜ -->
            <div id="panel-fullDiscount" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>æ»¡å¤šå°‘å…ƒ</label>
                        <input type="number" id="fullAmountForDiscount" min="0" value="500" placeholder="ä¾‹å¦‚ï¼š500">
                    </div>
                    <div class="input-item">
                        <label>æ‰“å‡ æŠ˜</label>
                        <input type="number" id="discountRate" min="0" max="10" step="0.1" value="8" placeholder="ä¾‹å¦‚ï¼š8">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šæ»¡500æ‰“8æŠ˜ï¼Œè´­ä¹°500å…ƒå•†å“å®ä»˜400å…ƒ
                </div>
            </div>

            <!-- æ»¡ä»¶æŠ˜æ‰£ -->
            <div id="panel-fullQuantityDiscount" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>æ»¡å‡ ä»¶</label>
                        <input type="number" id="fullQuantity" min="1" value="3" placeholder="ä¾‹å¦‚ï¼š3">
                    </div>
                    <div class="input-item">
                        <label>æ‰“å‡ æŠ˜</label>
                        <input type="number" id="quantityDiscountRate" min="0" max="10" step="0.1" value="8" placeholder="ä¾‹å¦‚ï¼š8">
                    </div>
                    <div class="input-item">
                        <label>å•ä»·ï¼ˆå…ƒï¼‰</label>
                        <input type="number" id="unitPrice" min="0" value="100" placeholder="ä¾‹å¦‚ï¼š100">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šæ»¡3ä»¶æ‰“8æŠ˜ï¼Œæ¯ä»¶100å…ƒï¼Œä¹°3ä»¶å®ä»˜240å…ƒ
                </div>
            </div>

            <!-- ç›´æ¥æŠ˜æ‰£ -->
            <div id="panel-directDiscount" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>æŠ˜æ‰£ï¼ˆå‡ æŠ˜ï¼‰</label>
                        <input type="number" id="directDiscountValue" min="0" max="10" step="0.1" value="8" placeholder="ä¾‹å¦‚ï¼š8.5">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼š8æŠ˜ä¼˜æƒ ï¼Œç›¸å½“äºæ”¯ä»˜åŸä»·çš„80%
                </div>
            </div>

            <!-- é˜¶æ¢¯æŠ˜æ‰£ -->
            <div id="panel-tieredDiscount" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>ç¬¬1æ¡£æ•°é‡</label>
                        <input type="number" id="tier1Qty" min="1" value="1" placeholder="ä¾‹å¦‚ï¼š1">
                    </div>
                    <div class="input-item">
                        <label>ç¬¬1æ¡£æŠ˜æ‰£</label>
                        <input type="number" id="tier1Discount" min="0" max="10" step="0.1" value="10" placeholder="ä¾‹å¦‚ï¼š10">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>ç¬¬2æ¡£æ•°é‡</label>
                        <input type="number" id="tier2Qty" min="1" value="3" placeholder="ä¾‹å¦‚ï¼š3">
                    </div>
                    <div class="input-item">
                        <label>ç¬¬2æ¡£æŠ˜æ‰£</label>
                        <input type="number" id="tier2Discount" min="0" max="10" step="0.1" value="9" placeholder="ä¾‹å¦‚ï¼š9">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>ç¬¬3æ¡£æ•°é‡</label>
                        <input type="number" id="tier3Qty" min="1" value="5" placeholder="ä¾‹å¦‚ï¼š5">
                    </div>
                    <div class="input-item">
                        <label>ç¬¬3æ¡£æŠ˜æ‰£</label>
                        <input type="number" id="tier3Discount" min="0" max="10" step="0.1" value="8" placeholder="ä¾‹å¦‚ï¼š8">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>å•ä»·ï¼ˆå…ƒï¼‰</label>
                        <input type="number" id="tieredUnitPrice" min="0" value="100" placeholder="ä¾‹å¦‚ï¼š100">
                    </div>
                    <div class="input-item">
                        <label>è´­ä¹°æ•°é‡</label>
                        <input type="number" id="purchaseQty" min="1" value="5" placeholder="ä¾‹å¦‚ï¼š5">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šä¹°1-2ä»¶åŸä»·ï¼Œä¹°3-4ä»¶9æŠ˜ï¼Œä¹°5ä»¶åŠä»¥ä¸Š8æŠ˜
                </div>
            </div>

            <!-- ç»„åˆå®šä»· -->
            <div id="panel-bundlePrice" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>ä»»é€‰å‡ ä»¶</label>
                        <input type="number" id="bundleQuantity" min="1" value="3" placeholder="ä¾‹å¦‚ï¼š3">
                    </div>
                    <div class="input-item">
                        <label>æ€»ä»·ï¼ˆå…ƒï¼‰</label>
                        <input type="number" id="bundleTotalPrice" min="0" value="100" placeholder="ä¾‹å¦‚ï¼š100">
                    </div>
                    <div class="input-item">
                        <label>å•å“åŸä»·ï¼ˆå…ƒï¼‰</label>
                        <input type="number" id="bundleOriginalPrice" min="0" value="50" placeholder="ä¾‹å¦‚ï¼š50">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šä»»é€‰3ä»¶100å…ƒï¼ŒåŸä»·æ¯ä»¶50å…ƒï¼Œç›¸å½“äº6.67æŠ˜
                </div>
            </div>

            <!-- åŠ ä»·è´­ -->
            <div id="panel-extraPurchase" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>æ¶ˆè´¹é—¨æ§›ï¼ˆå…ƒï¼‰</label>
                        <input type="number" id="extraThreshold" min="0" value="100" placeholder="ä¾‹å¦‚ï¼š100">
                    </div>
                    <div class="input-item">
                        <label>åŠ ä»·é‡‘é¢ï¼ˆå…ƒï¼‰</label>
                        <input type="number" id="extraPrice" min="0" value="10" placeholder="ä¾‹å¦‚ï¼š10">
                    </div>
                    <div class="input-item">
                        <label>æ¢è´­å•†å“åŸä»·ï¼ˆå…ƒï¼‰</label>
                        <input type="number" id="extraOriginalPrice" min="0" value="50" placeholder="ä¾‹å¦‚ï¼š50">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šæ»¡100å…ƒåŠ 10å…ƒæ¢è´­ä»·å€¼50å…ƒå•†å“ï¼Œæ¢è´­å•†å“ç›¸å½“äº2æŠ˜
                </div>
            </div>

            <!-- ç™¾åˆ†æ¯”ä¼˜æƒ  -->
            <div id="panel-percentOff" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>ä¼˜æƒ ç™¾åˆ†æ¯”ï¼ˆ%ï¼‰</label>
                        <input type="number" id="percentValue" min="0" max="100" step="1" value="30" placeholder="ä¾‹å¦‚ï¼š30">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šç«‹å‡30%ï¼Œç›¸å½“äº7æŠ˜ä¼˜æƒ 
                </div>
            </div>

            <!-- ä¼šå‘˜ç§¯åˆ†å€æ•° -->
            <div id="panel-memberMultiplier" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>ç§¯åˆ†å€æ•°</label>
                        <input type="number" id="multiplierValue" min="1" step="1" value="2" placeholder="ä¾‹å¦‚ï¼š2">
                    </div>
                    <div class="input-item">
                        <label>ç§¯åˆ†ä»·å€¼æ¯”ä¾‹ï¼ˆ%ï¼‰</label>
                        <input type="number" id="pointValueRate" min="0" max="100" step="0.1" value="1" placeholder="ä¾‹å¦‚ï¼š1è¡¨ç¤º100ç§¯åˆ†=1å…ƒ">
                    </div>
                </div>
                <div class="tip-box">
                    ğŸ’¡ ä¾‹å¦‚ï¼šåŒå€ç§¯åˆ†ï¼Œè‹¥ç§¯åˆ†ä»·å€¼ä¸º1%ï¼Œç›¸å½“äºé¢å¤–è·å¾—1%è¿”åˆ©
                </div>
            </div>

            <!-- ç»“æœå±•ç¤º -->
            <div id="resultPanel" class="result-panel">
                <div class="result-label">ç›¸å½“äºæŠ˜æ‰£</div>
                <div class="result-value" id="resultDiscount">-</div>
                <div class="result-detail" id="resultDetail">è¯·é€‰æ‹©ä¼˜æƒ ç±»å‹å¹¶å¡«å†™å‚æ•°</div>
            </div>

            <!-- ä½¿ç”¨ç¤ºä¾‹ -->
            <div class="discount-examples">
                <h3>ğŸ’¼ å…¨çƒå¸¸è§ä¼˜æƒ ç±»å‹ç¤ºä¾‹</h3>
                <div class="example-tags">
                    <span class="example-tag">ğŸ‡¨ğŸ‡³ æ»¡å‡ï¼ˆä¸­å›½å¸¸è§ï¼‰</span>
                    <span class="example-tag">ğŸ‡ºğŸ‡¸ Buy One Get One (BOGO)</span>
                    <span class="example-tag">ğŸ‡¯ğŸ‡µ ç¬¬äºŒä»¶åŠä»·</span>
                    <span class="example-tag">ğŸ‡°ğŸ‡· å……å€¼è¿”åˆ©</span>
                    <span class="example-tag">ğŸ‡¬ğŸ‡§ 3 for 2 (ä¹°3ä»˜2)</span>
                    <span class="example-tag">ğŸ‡©ğŸ‡ª é˜¶æ¢¯æŠ˜æ‰£</span>
                    <span class="example-tag">ğŸ‡«ğŸ‡· ä¼šå‘˜ä¸“äº«æŠ˜æ‰£</span>
                    <span class="example-tag">ğŸ‡¦ğŸ‡º æ»¡é¢æ‰“æŠ˜</span>
                    <span class="example-tag">ğŸ‡¨ğŸ‡¦ Bundle Dealï¼ˆç»„åˆä¼˜æƒ ï¼‰</span>
                    <span class="example-tag">ğŸŒ Black Fridayï¼ˆé»‘äº”æŠ˜æ‰£ï¼‰</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // è·å–DOMå…ƒç´ 
        const discountType = document.getElementById('discountType');
        const resultPanel = document.getElementById('resultPanel');
        const resultDiscount = document.getElementById('resultDiscount');
        const resultDetail = document.getElementById('resultDetail');

        // æ‰€æœ‰è¾“å…¥é¢æ¿
        const panels = {
            'buyGetFree': document.getElementById('panel-buyGetFree'),
            'recharge': document.getElementById('panel-recharge'),
            'nthDiscount': document.getElementById('panel-nthDiscount'),
            'fullReduction': document.getElementById('panel-fullReduction'),
            'fullDiscount': document.getElementById('panel-fullDiscount'),
            'fullQuantityDiscount': document.getElementById('panel-fullQuantityDiscount'),
            'directDiscount': document.getElementById('panel-directDiscount'),
            'tieredDiscount': document.getElementById('panel-tieredDiscount'),
            'bundlePrice': document.getElementById('panel-bundlePrice'),
            'extraPurchase': document.getElementById('panel-extraPurchase'),
            'percentOff': document.getElementById('panel-percentOff'),
            'memberMultiplier': document.getElementById('panel-memberMultiplier')
        };

        // ç›‘å¬ç±»å‹é€‰æ‹©
        discountType.addEventListener('change', function() {
            // éšè—æ‰€æœ‰é¢æ¿
            Object.values(panels).forEach(panel => {
                if (panel) panel.classList.remove('active');
            });

            // æ˜¾ç¤ºé€‰ä¸­çš„é¢æ¿
            const selectedType = this.value;
            if (selectedType && panels[selectedType]) {
                panels[selectedType].classList.add('active');
                calculateDiscount();
            } else {
                resultPanel.classList.remove('active');
            }
        });

        // ä¸ºæ‰€æœ‰è¾“å…¥æ¡†æ·»åŠ å®æ—¶ç›‘å¬
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('input', calculateDiscount);
        });

        // è®¡ç®—æŠ˜æ‰£
        function calculateDiscount() {
            const type = discountType.value;
            if (!type) return;

            let discount = 0;
            let detail = '';

            try {
                switch(type) {
                    case 'buyGetFree':
                        discount = calculateBuyGetFree();
                        break;
                    case 'recharge':
                        discount = calculateRecharge();
                        break;
                    case 'nthDiscount':
                        discount = calculateNthDiscount();
                        break;
                    case 'fullReduction':
                        discount = calculateFullReduction();
                        break;
                    case 'fullDiscount':
                        discount = calculateFullDiscount();
                        break;
                    case 'fullQuantityDiscount':
                        discount = calculateFullQuantityDiscount();
                        break;
                    case 'directDiscount':
                        discount = calculateDirectDiscount();
                        break;
                    case 'tieredDiscount':
                        discount = calculateTieredDiscount();
                        break;
                    case 'bundlePrice':
                        discount = calculateBundlePrice();
                        break;
                    case 'extraPurchase':
                        discount = calculateExtraPurchase();
                        break;
                    case 'percentOff':
                        discount = calculatePercentOff();
                        break;
                    case 'memberMultiplier':
                        discount = calculateMemberMultiplier();
                        break;
                }

                if (discount.value !== null && !isNaN(discount.value)) {
                    resultDiscount.textContent = discount.value.toFixed(2) + 'æŠ˜';
                    resultDetail.innerHTML = discount.detail;
                    resultPanel.classList.add('active');
                } else {
                    resultPanel.classList.remove('active');
                }
            } catch(e) {
                console.error(e);
            }
        }

        // ä¹°Mé€N
        function calculateBuyGetFree() {
            const buy = parseFloat(document.getElementById('buyQuantity').value) || 0;
            const free = parseFloat(document.getElementById('freeQuantity').value) || 0;
            
            if (buy <= 0) return { value: null, detail: 'è¯·è¾“å…¥æœ‰æ•ˆçš„è´­ä¹°æ•°é‡' };
            
            const total = buy + free;
            const discount = (buy / total) * 10;
            
            return {
                value: discount,
                detail: `ä¹°${buy}é€${free}ï¼Œç›¸å½“äºä¹°${total}ä»¶åªéœ€ä»˜${buy}ä»¶çš„é’±<br>å®é™…æ”¯ä»˜ï¼š${((discount/10)*100).toFixed(1)}%`
            };
        }

        // å……å€¼è¿”ç°
        function calculateRecharge() {
            const recharge = parseFloat(document.getElementById('rechargeAmount').value) || 0;
            const gift = parseFloat(document.getElementById('giftAmount').value) || 0;
            
            if (recharge <= 0) return { value: null, detail: 'è¯·è¾“å…¥æœ‰æ•ˆçš„å……å€¼é‡‘é¢' };
            
            const total = recharge + gift;
            const discount = (recharge / total) * 10;
            
            return {
                value: discount,
                detail: `å……${recharge}å…ƒé€${gift}å…ƒï¼Œå®é™…å¯æ¶ˆè´¹${total}å…ƒ<br>å®é™…æ”¯ä»˜ï¼š${((discount/10)*100).toFixed(1)}%`
            };
        }

        // ç¬¬Nä»¶æ‰“æŠ˜
        function calculateNthDiscount() {
            const nth = parseFloat(document.getElementById('nthItem').value) || 0;
            const rate = parseFloat(document.getElementById('nthDiscountRate').value);
            const total = parseFloat(document.getElementById('totalItems').value) || 0;
            
            if (nth <= 0 || total <= 0 || nth > total) {
                return { value: null, detail: 'è¯·è¾“å…¥æœ‰æ•ˆçš„å‚æ•°' };
            }
            
            // è®¡ç®—æ€»ä»·
            let totalPrice = nth - 1; // å‰é¢æ­£ä»·çš„ä»¶æ•°
            let discountItems = total - nth + 1; // æ‰“æŠ˜çš„ä»¶æ•°
            totalPrice += discountItems * (rate / 10);
            
            const discount = (totalPrice / total) * 10;
            
            return {
                value: discount,
                detail: `ç¬¬${nth}ä»¶${rate === 0 ? 'å…è´¹' : rate + 'æŠ˜'}ï¼Œä¹°${total}ä»¶<br>å‰${nth-1}ä»¶åŸä»·ï¼Œå${discountItems}ä»¶${rate === 0 ? 'å…è´¹' : rate + 'æŠ˜'}<br>å¹³å‡æŠ˜æ‰£ï¼š${discount.toFixed(2)}æŠ˜`
            };
        }

        // æ»¡å‡ä¼˜æƒ 
        function calculateFullReduction() {
            const full = parseFloat(document.getElementById('fullAmount').value) || 0;
            const reduction = parseFloat(document.getElementById('reductionAmount').value) || 0;
            
            if (full <= 0 || reduction < 0) {
                return { value: null, detail: 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‡‘é¢' };
            }
            
            const actualPay = full - reduction;
            const discount = (actualPay / full) * 10;
            
            return {
                value: discount,
                detail: `æ»¡${full}å…ƒå‡${reduction}å…ƒ<br>å®é™…æ”¯ä»˜ï¼š${actualPay}å…ƒ<br>ä¼˜æƒ åŠ›åº¦ï¼š${(100 - (actualPay/full)*100).toFixed(1)}%`
            };
        }

        // æ»¡é¢æ‰“æŠ˜
        function calculateFullDiscount() {
            const full = parseFloat(document.getElementById('fullAmountForDiscount').value) || 0;
            const rate = parseFloat(document.getElementById('discountRate').value);
            
            if (full <= 0 || rate < 0) {
                return { value: null, detail: 'è¯·è¾“å…¥æœ‰æ•ˆçš„å‚æ•°' };
            }
            
            const actualPay = full * (rate / 10);
            
            return {
                value: rate,
                detail: `æ»¡${full}å…ƒæ‰“${rate}æŠ˜<br>å®é™…æ”¯ä»˜ï¼š${actualPay.toFixed(2)}å…ƒ<br>èŠ‚çœï¼š${(full - actualPay).toFixed(2)}å…ƒ`
            };
        }

        // æ»¡ä»¶æŠ˜æ‰£
        function calculateFullQuantityDiscount() {
            const qty = parseFloat(document.getElementById('fullQuantity').value) || 0;
            const rate = parseFloat(document.getElementById('quantityDiscountRate').value);
            const price = parseFloat(document.getElementById('unitPrice').value) || 0;
            
            if (qty <= 0 || price <= 0) {
                return { value: null, detail: 'è¯·è¾“å…¥æœ‰æ•ˆçš„å‚æ•°' };
            }
            
            const originalTotal = qty * price;
            const actualPay = originalTotal * (rate / 10);
            
            return {
                value: rate,
                detail: `æ»¡${qty}ä»¶æ‰“${rate}æŠ˜ï¼Œå•ä»·${price}å…ƒ<br>åŸä»·ï¼š${originalTotal.toFixed(2)}å…ƒ<br>å®ä»˜ï¼š${actualPay.toFixed(2)}å…ƒ`
            };
        }

        // ç›´æ¥æŠ˜æ‰£
        function calculateDirectDiscount() {
            const rate = parseFloat(document.getElementById('directDiscountValue').value);
            
            if (rate < 0 || rate > 10) {
                return { value: null, detail: 'è¯·è¾“å…¥0-10ä¹‹é—´çš„æŠ˜æ‰£' };
            }
            
            return {
                value: rate,
                detail: `ç›´æ¥${rate}æŠ˜ä¼˜æƒ <br>å®é™…æ”¯ä»˜åŸä»·çš„${(rate * 10).toFixed(0)}%<br>ä¼˜æƒ ${(100 - rate * 10).toFixed(0)}%`
            };
        }

        // é˜¶æ¢¯æŠ˜æ‰£
        function calculateTieredDiscount() {
            const tier1Qty = parseFloat(document.getElementById('tier1Qty').value) || 0;
            const tier1Disc = parseFloat(document.getElementById('tier1Discount').value) || 10;
            const tier2Qty = parseFloat(document.getElementById('tier2Qty').value) || 0;
            const tier2Disc = parseFloat(document.getElementById('tier2Discount').value) || 10;
            const tier3Qty = parseFloat(document.getElementById('tier3Qty').value) || 0;
            const tier3Disc = parseFloat(document.getElementById('tier3Discount').value) || 10;
            const unitPrice = parseFloat(document.getElementById('tieredUnitPrice').value) || 0;
            const purchaseQty = parseFloat(document.getElementById('purchaseQty').value) || 0;
            
            if (unitPrice <= 0 || purchaseQty <= 0) {
                return { value: null, detail: 'è¯·è¾“å…¥æœ‰æ•ˆçš„å‚æ•°' };
            }
            
            let applicableDiscount = tier1Disc;
            if (purchaseQty >= tier3Qty) {
                applicableDiscount = tier3Disc;
            } else if (purchaseQty >= tier2Qty) {
                applicableDiscount = tier2Disc;
            }
            
            const originalTotal = purchaseQty * unitPrice;
            const actualPay = originalTotal * (applicableDiscount / 10);
            
            return {
                value: applicableDiscount,
                detail: `è´­ä¹°${purchaseQty}ä»¶ï¼Œé€‚ç”¨${applicableDiscount}æŠ˜<br>åŸä»·ï¼š${originalTotal.toFixed(2)}å…ƒ<br>å®ä»˜ï¼š${actualPay.toFixed(2)}å…ƒ`
            };
        }

        // ç»„åˆå®šä»·
        function calculateBundlePrice() {
            const qty = parseFloat(document.getElementById('bundleQuantity').value) || 0;
            const bundlePrice = parseFloat(document.getElementById('bundleTotalPrice').value) || 0;
            const originalPrice = parseFloat(document.getElementById('bundleOriginalPrice').value) || 0;
            
            if (qty <= 0 || originalPrice <= 0) {
                return { value: null, detail: 'è¯·è¾“å…¥æœ‰æ•ˆçš„å‚æ•°' };
            }
            
            const originalTotal = qty * originalPrice;
            const discount = (bundlePrice / originalTotal) * 10;
            
            return {
                value: discount,
                detail: `ä»»é€‰${qty}ä»¶${bundlePrice}å…ƒ<br>åŸä»·æ€»è®¡ï¼š${originalTotal.toFixed(2)}å…ƒ<br>èŠ‚çœï¼š${(originalTotal - bundlePrice).toFixed(2)}å…ƒ`
            };
        }

        // åŠ ä»·è´­
        function calculateExtraPurchase() {
            const threshold = parseFloat(document.getElementById('extraThreshold').value) || 0;
            const extraPrice = parseFloat(document.getElementById('extraPrice').value) || 0;
            const originalPrice = parseFloat(document.getElementById('extraOriginalPrice').value) || 0;
            
            if (originalPrice <= 0) {
                return { value: null, detail: 'è¯·è¾“å…¥æœ‰æ•ˆçš„å‚æ•°' };
            }
            
            const discount = (extraPrice / originalPrice) * 10;
            
            return {
                value: discount,
                detail: `æ»¡${threshold}å…ƒï¼ŒåŠ ${extraPrice}å…ƒæ¢è´­<br>æ¢è´­å•†å“åŸä»·ï¼š${originalPrice}å…ƒ<br>æ¢è´­å•†å“æŠ˜æ‰£ï¼š${discount.toFixed(2)}æŠ˜ï¼ˆèŠ‚çœ${(originalPrice - extraPrice).toFixed(2)}å…ƒï¼‰`
            };
        }

        // ç™¾åˆ†æ¯”ä¼˜æƒ 
        function calculatePercentOff() {
            const percent = parseFloat(document.getElementById('percentValue').value) || 0;
            
            if (percent < 0 || percent > 100) {
                return { value: null, detail: 'è¯·è¾“å…¥0-100ä¹‹é—´çš„ç™¾åˆ†æ¯”' };
            }
            
            const discount = (100 - percent) / 10;
            
            return {
                value: discount,
                detail: `ç«‹å‡${percent}%<br>ç›¸å½“äº${discount.toFixed(2)}æŠ˜ä¼˜æƒ <br>å®é™…æ”¯ä»˜${(100 - percent).toFixed(0)}%`
            };
        }

        // ä¼šå‘˜ç§¯åˆ†å€æ•°
        function calculateMemberMultiplier() {
            const multiplier = parseFloat(document.getElementById('multiplierValue').value) || 1;
            const pointValue = parseFloat(document.getElementById('pointValueRate').value) || 0;
            
            const extraValue = (multiplier - 1) * pointValue;
            const discount = 10 - (extraValue / 10);
            
            return {
                value: discount,
                detail: `${multiplier}å€ç§¯åˆ†ï¼Œç§¯åˆ†ä»·å€¼${pointValue}%<br>é¢å¤–è·å¾—${extraValue.toFixed(2)}%è¿”åˆ©<br>ç›¸å½“äº${discount.toFixed(2)}æŠ˜ä¼˜æƒ `
            };
        }
    </script>
</body>
</html>