<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全球优惠折扣计算系统</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-group label {
            display: block;
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .form-group select {
            width: 100%;
            padding: 15px;
            font-size: 1em;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-panel {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            display: none;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .input-panel.active {
            display: block;
        }

        .input-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .input-item {
            flex: 1;
            min-width: 200px;
        }

        .input-item label {
            display: block;
            font-size: 0.95em;
            color: #555;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-item input {
            width: 100%;
            padding: 12px;
            font-size: 1em;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .input-item input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .result-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin-top: 30px;
            color: white;
            display: none;
        }

        .result-panel.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .result-label {
            font-size: 1.2em;
            opacity: 0.95;
            margin-bottom: 15px;
        }

        .result-value {
            font-size: 5em;
            font-weight: bold;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .result-detail {
            font-size: 1.1em;
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .tip-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            color: #856404;
        }

        .discount-examples {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px dashed #e0e0e0;
        }

        .discount-examples h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .example-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .example-tag {
            background: #f0f0f0;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #666;
        }

        .warning {
            color: #ff6b6b;
            font-size: 0.9em;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .main-card {
                padding: 25px;
            }

            .result-value {
                font-size: 3.5em;
            }

            .header h1 {
                font-size: 2em;
            }

            .input-item {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎁 全球优惠折扣计算系统</h1>
            <p>支持全球各类促销活动折扣力度计算</p>
        </div>

        <div class="main-card">
            <div class="form-group">
                <label for="discountType">选择优惠类型</label>
                <select id="discountType">
                    <option value="">请选择优惠类型...</option>
                    <option value="buyGetFree">买M送N（买一送一、买二送一等）</option>
                    <option value="recharge">充值返现/储值送（充1000送200等）</option>
                    <option value="nthDiscount">第N件打折（第二件半价、第三件免费等）</option>
                    <option value="fullReduction">满减优惠（满100减20等）</option>
                    <option value="fullDiscount">满额打折（满500打8折等）</option>
                    <option value="fullQuantityDiscount">满件折扣（满3件打8折等）</option>
                    <option value="directDiscount">直接折扣（8折、9折等）</option>
                    <option value="tieredDiscount">阶梯折扣（买越多折扣越大）</option>
                    <option value="bundlePrice">组合定价（任选N件M元）</option>
                    <option value="extraPurchase">加价购/换购（满100加10元换购）</option>
                    <option value="percentOff">百分比优惠（立减30%等）</option>
                    <option value="memberMultiplier">会员积分倍数（双倍积分、三倍积分）</option>
                </select>
            </div>

            <!-- 买M送N -->
            <div id="panel-buyGetFree" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>买几件（M）</label>
                        <input type="number" id="buyQuantity" min="1" value="1" placeholder="例如：2">
                    </div>
                    <div class="input-item">
                        <label>送几件（N）</label>
                        <input type="number" id="freeQuantity" min="1" value="1" placeholder="例如：1">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：买2送1，相当于买3件商品只需付2件的钱
                </div>
            </div>

            <!-- 充值返现 -->
            <div id="panel-recharge" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>充值金额</label>
                        <input type="number" id="rechargeAmount" min="0" value="1000" placeholder="例如：1000">
                    </div>
                    <div class="input-item">
                        <label>赠送金额</label>
                        <input type="number" id="giftAmount" min="0" value="200" placeholder="例如：200">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：充1000送200，相当于实际消费1200元只需支付1000元
                </div>
            </div>

            <!-- 第N件打折 -->
            <div id="panel-nthDiscount" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>第几件开始优惠</label>
                        <input type="number" id="nthItem" min="1" value="2" placeholder="例如：2">
                    </div>
                    <div class="input-item">
                        <label>优惠折扣（填折扣数，0表示免费）</label>
                        <input type="number" id="nthDiscountRate" min="0" max="10" step="0.1" value="5" placeholder="例如：5表示5折，0表示免费">
                    </div>
                    <div class="input-item">
                        <label>购买总件数</label>
                        <input type="number" id="totalItems" min="1" value="2" placeholder="例如：3">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：第2件半价，买3件商品时，第2、3件都是半价
                </div>
            </div>

            <!-- 满减优惠 -->
            <div id="panel-fullReduction" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>满多少元</label>
                        <input type="number" id="fullAmount" min="0" value="100" placeholder="例如：100">
                    </div>
                    <div class="input-item">
                        <label>减多少元</label>
                        <input type="number" id="reductionAmount" min="0" value="20" placeholder="例如：20">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：满100减20，相当于购买100元商品只需付80元
                </div>
            </div>

            <!-- 满额打折 -->
            <div id="panel-fullDiscount" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>满多少元</label>
                        <input type="number" id="fullAmountForDiscount" min="0" value="500" placeholder="例如：500">
                    </div>
                    <div class="input-item">
                        <label>打几折</label>
                        <input type="number" id="discountRate" min="0" max="10" step="0.1" value="8" placeholder="例如：8">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：满500打8折，购买500元商品实付400元
                </div>
            </div>

            <!-- 满件折扣 -->
            <div id="panel-fullQuantityDiscount" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>满几件</label>
                        <input type="number" id="fullQuantity" min="1" value="3" placeholder="例如：3">
                    </div>
                    <div class="input-item">
                        <label>打几折</label>
                        <input type="number" id="quantityDiscountRate" min="0" max="10" step="0.1" value="8" placeholder="例如：8">
                    </div>
                    <div class="input-item">
                        <label>单价（元）</label>
                        <input type="number" id="unitPrice" min="0" value="100" placeholder="例如：100">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：满3件打8折，每件100元，买3件实付240元
                </div>
            </div>

            <!-- 直接折扣 -->
            <div id="panel-directDiscount" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>折扣（几折）</label>
                        <input type="number" id="directDiscountValue" min="0" max="10" step="0.1" value="8" placeholder="例如：8.5">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：8折优惠，相当于支付原价的80%
                </div>
            </div>

            <!-- 阶梯折扣 -->
            <div id="panel-tieredDiscount" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>第1档数量</label>
                        <input type="number" id="tier1Qty" min="1" value="1" placeholder="例如：1">
                    </div>
                    <div class="input-item">
                        <label>第1档折扣</label>
                        <input type="number" id="tier1Discount" min="0" max="10" step="0.1" value="10" placeholder="例如：10">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>第2档数量</label>
                        <input type="number" id="tier2Qty" min="1" value="3" placeholder="例如：3">
                    </div>
                    <div class="input-item">
                        <label>第2档折扣</label>
                        <input type="number" id="tier2Discount" min="0" max="10" step="0.1" value="9" placeholder="例如：9">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>第3档数量</label>
                        <input type="number" id="tier3Qty" min="1" value="5" placeholder="例如：5">
                    </div>
                    <div class="input-item">
                        <label>第3档折扣</label>
                        <input type="number" id="tier3Discount" min="0" max="10" step="0.1" value="8" placeholder="例如：8">
                    </div>
                </div>
                <div class="input-row">
                    <div class="input-item">
                        <label>单价（元）</label>
                        <input type="number" id="tieredUnitPrice" min="0" value="100" placeholder="例如：100">
                    </div>
                    <div class="input-item">
                        <label>购买数量</label>
                        <input type="number" id="purchaseQty" min="1" value="5" placeholder="例如：5">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：买1-2件原价，买3-4件9折，买5件及以上8折
                </div>
            </div>

            <!-- 组合定价 -->
            <div id="panel-bundlePrice" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>任选几件</label>
                        <input type="number" id="bundleQuantity" min="1" value="3" placeholder="例如：3">
                    </div>
                    <div class="input-item">
                        <label>总价（元）</label>
                        <input type="number" id="bundleTotalPrice" min="0" value="100" placeholder="例如：100">
                    </div>
                    <div class="input-item">
                        <label>单品原价（元）</label>
                        <input type="number" id="bundleOriginalPrice" min="0" value="50" placeholder="例如：50">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：任选3件100元，原价每件50元，相当于6.67折
                </div>
            </div>

            <!-- 加价购 -->
            <div id="panel-extraPurchase" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>消费门槛（元）</label>
                        <input type="number" id="extraThreshold" min="0" value="100" placeholder="例如：100">
                    </div>
                    <div class="input-item">
                        <label>加价金额（元）</label>
                        <input type="number" id="extraPrice" min="0" value="10" placeholder="例如：10">
                    </div>
                    <div class="input-item">
                        <label>换购商品原价（元）</label>
                        <input type="number" id="extraOriginalPrice" min="0" value="50" placeholder="例如：50">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：满100元加10元换购价值50元商品，换购商品相当于2折
                </div>
            </div>

            <!-- 百分比优惠 -->
            <div id="panel-percentOff" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>优惠百分比（%）</label>
                        <input type="number" id="percentValue" min="0" max="100" step="1" value="30" placeholder="例如：30">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：立减30%，相当于7折优惠
                </div>
            </div>

            <!-- 会员积分倍数 -->
            <div id="panel-memberMultiplier" class="input-panel">
                <div class="input-row">
                    <div class="input-item">
                        <label>积分倍数</label>
                        <input type="number" id="multiplierValue" min="1" step="1" value="2" placeholder="例如：2">
                    </div>
                    <div class="input-item">
                        <label>积分价值比例（%）</label>
                        <input type="number" id="pointValueRate" min="0" max="100" step="0.1" value="1" placeholder="例如：1表示100积分=1元">
                    </div>
                </div>
                <div class="tip-box">
                    💡 例如：双倍积分，若积分价值为1%，相当于额外获得1%返利
                </div>
            </div>

            <!-- 结果展示 -->
            <div id="resultPanel" class="result-panel">
                <div class="result-label">相当于折扣</div>
                <div class="result-value" id="resultDiscount">-</div>
                <div class="result-detail" id="resultDetail">请选择优惠类型并填写参数</div>
            </div>

            <!-- 使用示例 -->
            <div class="discount-examples">
                <h3>💼 全球常见优惠类型示例</h3>
                <div class="example-tags">
                    <span class="example-tag">🇨🇳 满减（中国常见）</span>
                    <span class="example-tag">🇺🇸 Buy One Get One (BOGO)</span>
                    <span class="example-tag">🇯🇵 第二件半价</span>
                    <span class="example-tag">🇰🇷 充值返利</span>
                    <span class="example-tag">🇬🇧 3 for 2 (买3付2)</span>
                    <span class="example-tag">🇩🇪 阶梯折扣</span>
                    <span class="example-tag">🇫🇷 会员专享折扣</span>
                    <span class="example-tag">🇦🇺 满额打折</span>
                    <span class="example-tag">🇨🇦 Bundle Deal（组合优惠）</span>
                    <span class="example-tag">🌍 Black Friday（黑五折扣）</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 获取DOM元素
        const discountType = document.getElementById('discountType');
        const resultPanel = document.getElementById('resultPanel');
        const resultDiscount = document.getElementById('resultDiscount');
        const resultDetail = document.getElementById('resultDetail');

        // 所有输入面板
        const panels = {
            'buyGetFree': document.getElementById('panel-buyGetFree'),
            'recharge': document.getElementById('panel-recharge'),
            'nthDiscount': document.getElementById('panel-nthDiscount'),
            'fullReduction': document.getElementById('panel-fullReduction'),
            'fullDiscount': document.getElementById('panel-fullDiscount'),
            'fullQuantityDiscount': document.getElementById('panel-fullQuantityDiscount'),
            'directDiscount': document.getElementById('panel-directDiscount'),
            'tieredDiscount': document.getElementById('panel-tieredDiscount'),
            'bundlePrice': document.getElementById('panel-bundlePrice'),
            'extraPurchase': document.getElementById('panel-extraPurchase'),
            'percentOff': document.getElementById('panel-percentOff'),
            'memberMultiplier': document.getElementById('panel-memberMultiplier')
        };

        // 监听类型选择
        discountType.addEventListener('change', function() {
            // 隐藏所有面板
            Object.values(panels).forEach(panel => {
                if (panel) panel.classList.remove('active');
            });

            // 显示选中的面板
            const selectedType = this.value;
            if (selectedType && panels[selectedType]) {
                panels[selectedType].classList.add('active');
                calculateDiscount();
            } else {
                resultPanel.classList.remove('active');
            }
        });

        // 为所有输入框添加实时监听
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('input', calculateDiscount);
        });

        // 计算折扣
        function calculateDiscount() {
            const type = discountType.value;
            if (!type) return;

            let discount = 0;
            let detail = '';

            try {
                switch(type) {
                    case 'buyGetFree':
                        discount = calculateBuyGetFree();
                        break;
                    case 'recharge':
                        discount = calculateRecharge();
                        break;
                    case 'nthDiscount':
                        discount = calculateNthDiscount();
                        break;
                    case 'fullReduction':
                        discount = calculateFullReduction();
                        break;
                    case 'fullDiscount':
                        discount = calculateFullDiscount();
                        break;
                    case 'fullQuantityDiscount':
                        discount = calculateFullQuantityDiscount();
                        break;
                    case 'directDiscount':
                        discount = calculateDirectDiscount();
                        break;
                    case 'tieredDiscount':
                        discount = calculateTieredDiscount();
                        break;
                    case 'bundlePrice':
                        discount = calculateBundlePrice();
                        break;
                    case 'extraPurchase':
                        discount = calculateExtraPurchase();
                        break;
                    case 'percentOff':
                        discount = calculatePercentOff();
                        break;
                    case 'memberMultiplier':
                        discount = calculateMemberMultiplier();
                        break;
                }

                if (discount.value !== null && !isNaN(discount.value)) {
                    resultDiscount.textContent = discount.value.toFixed(2) + '折';
                    resultDetail.innerHTML = discount.detail;
                    resultPanel.classList.add('active');
                } else {
                    resultPanel.classList.remove('active');
                }
            } catch(e) {
                console.error(e);
            }
        }

        // 买M送N
        function calculateBuyGetFree() {
            const buy = parseFloat(document.getElementById('buyQuantity').value) || 0;
            const free = parseFloat(document.getElementById('freeQuantity').value) || 0;
            
            if (buy <= 0) return { value: null, detail: '请输入有效的购买数量' };
            
            const total = buy + free;
            const discount = (buy / total) * 10;
            
            return {
                value: discount,
                detail: `买${buy}送${free}，相当于买${total}件只需付${buy}件的钱<br>实际支付：${((discount/10)*100).toFixed(1)}%`
            };
        }

        // 充值返现
        function calculateRecharge() {
            const recharge = parseFloat(document.getElementById('rechargeAmount').value) || 0;
            const gift = parseFloat(document.getElementById('giftAmount').value) || 0;
            
            if (recharge <= 0) return { value: null, detail: '请输入有效的充值金额' };
            
            const total = recharge + gift;
            const discount = (recharge / total) * 10;
            
            return {
                value: discount,
                detail: `充${recharge}元送${gift}元，实际可消费${total}元<br>实际支付：${((discount/10)*100).toFixed(1)}%`
            };
        }

        // 第N件打折
        function calculateNthDiscount() {
            const nth = parseFloat(document.getElementById('nthItem').value) || 0;
            const rate = parseFloat(document.getElementById('nthDiscountRate').value);
            const total = parseFloat(document.getElementById('totalItems').value) || 0;
            
            if (nth <= 0 || total <= 0 || nth > total) {
                return { value: null, detail: '请输入有效的参数' };
            }
            
            // 计算总价
            let totalPrice = nth - 1; // 前面正价的件数
            let discountItems = total - nth + 1; // 打折的件数
            totalPrice += discountItems * (rate / 10);
            
            const discount = (totalPrice / total) * 10;
            
            return {
                value: discount,
                detail: `第${nth}件${rate === 0 ? '免费' : rate + '折'}，买${total}件<br>前${nth-1}件原价，后${discountItems}件${rate === 0 ? '免费' : rate + '折'}<br>平均折扣：${discount.toFixed(2)}折`
            };
        }

        // 满减优惠
        function calculateFullReduction() {
            const full = parseFloat(document.getElementById('fullAmount').value) || 0;
            const reduction = parseFloat(document.getElementById('reductionAmount').value) || 0;
            
            if (full <= 0 || reduction < 0) {
                return { value: null, detail: '请输入有效的金额' };
            }
            
            const actualPay = full - reduction;
            const discount = (actualPay / full) * 10;
            
            return {
                value: discount,
                detail: `满${full}元减${reduction}元<br>实际支付：${actualPay}元<br>优惠力度：${(100 - (actualPay/full)*100).toFixed(1)}%`
            };
        }

        // 满额打折
        function calculateFullDiscount() {
            const full = parseFloat(document.getElementById('fullAmountForDiscount').value) || 0;
            const rate = parseFloat(document.getElementById('discountRate').value);
            
            if (full <= 0 || rate < 0) {
                return { value: null, detail: '请输入有效的参数' };
            }
            
            const actualPay = full * (rate / 10);
            
            return {
                value: rate,
                detail: `满${full}元打${rate}折<br>实际支付：${actualPay.toFixed(2)}元<br>节省：${(full - actualPay).toFixed(2)}元`
            };
        }

        // 满件折扣
        function calculateFullQuantityDiscount() {
            const qty = parseFloat(document.getElementById('fullQuantity').value) || 0;
            const rate = parseFloat(document.getElementById('quantityDiscountRate').value);
            const price = parseFloat(document.getElementById('unitPrice').value) || 0;
            
            if (qty <= 0 || price <= 0) {
                return { value: null, detail: '请输入有效的参数' };
            }
            
            const originalTotal = qty * price;
            const actualPay = originalTotal * (rate / 10);
            
            return {
                value: rate,
                detail: `满${qty}件打${rate}折，单价${price}元<br>原价：${originalTotal.toFixed(2)}元<br>实付：${actualPay.toFixed(2)}元`
            };
        }

        // 直接折扣
        function calculateDirectDiscount() {
            const rate = parseFloat(document.getElementById('directDiscountValue').value);
            
            if (rate < 0 || rate > 10) {
                return { value: null, detail: '请输入0-10之间的折扣' };
            }
            
            return {
                value: rate,
                detail: `直接${rate}折优惠<br>实际支付原价的${(rate * 10).toFixed(0)}%<br>优惠${(100 - rate * 10).toFixed(0)}%`
            };
        }

        // 阶梯折扣
        function calculateTieredDiscount() {
            const tier1Qty = parseFloat(document.getElementById('tier1Qty').value) || 0;
            const tier1Disc = parseFloat(document.getElementById('tier1Discount').value) || 10;
            const tier2Qty = parseFloat(document.getElementById('tier2Qty').value) || 0;
            const tier2Disc = parseFloat(document.getElementById('tier2Discount').value) || 10;
            const tier3Qty = parseFloat(document.getElementById('tier3Qty').value) || 0;
            const tier3Disc = parseFloat(document.getElementById('tier3Discount').value) || 10;
            const unitPrice = parseFloat(document.getElementById('tieredUnitPrice').value) || 0;
            const purchaseQty = parseFloat(document.getElementById('purchaseQty').value) || 0;
            
            if (unitPrice <= 0 || purchaseQty <= 0) {
                return { value: null, detail: '请输入有效的参数' };
            }
            
            let applicableDiscount = tier1Disc;
            if (purchaseQty >= tier3Qty) {
                applicableDiscount = tier3Disc;
            } else if (purchaseQty >= tier2Qty) {
                applicableDiscount = tier2Disc;
            }
            
            const originalTotal = purchaseQty * unitPrice;
            const actualPay = originalTotal * (applicableDiscount / 10);
            
            return {
                value: applicableDiscount,
                detail: `购买${purchaseQty}件，适用${applicableDiscount}折<br>原价：${originalTotal.toFixed(2)}元<br>实付：${actualPay.toFixed(2)}元`
            };
        }

        // 组合定价
        function calculateBundlePrice() {
            const qty = parseFloat(document.getElementById('bundleQuantity').value) || 0;
            const bundlePrice = parseFloat(document.getElementById('bundleTotalPrice').value) || 0;
            const originalPrice = parseFloat(document.getElementById('bundleOriginalPrice').value) || 0;
            
            if (qty <= 0 || originalPrice <= 0) {
                return { value: null, detail: '请输入有效的参数' };
            }
            
            const originalTotal = qty * originalPrice;
            const discount = (bundlePrice / originalTotal) * 10;
            
            return {
                value: discount,
                detail: `任选${qty}件${bundlePrice}元<br>原价总计：${originalTotal.toFixed(2)}元<br>节省：${(originalTotal - bundlePrice).toFixed(2)}元`
            };
        }

        // 加价购
        function calculateExtraPurchase() {
            const threshold = parseFloat(document.getElementById('extraThreshold').value) || 0;
            const extraPrice = parseFloat(document.getElementById('extraPrice').value) || 0;
            const originalPrice = parseFloat(document.getElementById('extraOriginalPrice').value) || 0;
            
            if (originalPrice <= 0) {
                return { value: null, detail: '请输入有效的参数' };
            }
            
            const discount = (extraPrice / originalPrice) * 10;
            
            return {
                value: discount,
                detail: `满${threshold}元，加${extraPrice}元换购<br>换购商品原价：${originalPrice}元<br>换购商品折扣：${discount.toFixed(2)}折（节省${(originalPrice - extraPrice).toFixed(2)}元）`
            };
        }

        // 百分比优惠
        function calculatePercentOff() {
            const percent = parseFloat(document.getElementById('percentValue').value) || 0;
            
            if (percent < 0 || percent > 100) {
                return { value: null, detail: '请输入0-100之间的百分比' };
            }
            
            const discount = (100 - percent) / 10;
            
            return {
                value: discount,
                detail: `立减${percent}%<br>相当于${discount.toFixed(2)}折优惠<br>实际支付${(100 - percent).toFixed(0)}%`
            };
        }

        // 会员积分倍数
        function calculateMemberMultiplier() {
            const multiplier = parseFloat(document.getElementById('multiplierValue').value) || 1;
            const pointValue = parseFloat(document.getElementById('pointValueRate').value) || 0;
            
            const extraValue = (multiplier - 1) * pointValue;
            const discount = 10 - (extraValue / 10);
            
            return {
                value: discount,
                detail: `${multiplier}倍积分，积分价值${pointValue}%<br>额外获得${extraValue.toFixed(2)}%返利<br>相当于${discount.toFixed(2)}折优惠`
            };
        }
    </script>
</body>
</html>